<?php
ini_set ( 'display_errors', 1 );
ini_set ( 'display_startup_errors', 1 );
error_reporting ( E_ERROR | E_PARSE );
error_reporting ( 1 );

if ($_SERVER ['REQUEST_METHOD'] === 'POST') {
	$filename = $_SERVER ['DOCUMENT_ROOT'] . "/smart7/smartform/" . $_POST ['url'];

	// Überprüfe, ob der 'direction'-Parameter gesetzt ist, und weise ihn einer Variablen zu
	$direction = isset ( $_POST ['direction'] ) ? $_POST ['direction'] : 'right'; // Standardwert 'right', falls nicht gesetzt

	// Erstellen eines neuen Imagick-Objekts
	$image = new Imagick ( $filename );

	// Entscheide, ob das Bild nach links oder rechts gedreht werden soll
	if ($direction === 'left') {
		// Drehen des Bildes um 90 Grad nach links (gegen den Uhrzeigersinn)
		$image->rotateImage ( new ImagickPixel ( 'none' ), - 90 );
	} else {
		// Drehen des Bildes um 90 Grad nach rechts (im Uhrzeigersinn)
		$image->rotateImage ( new ImagickPixel ( 'none' ), 90 );
	}

	// Speichern des gedrehten Bildes
	$image->writeImage ( $filename );

	// Aufräumen
	$image->clear ();
	$image->destroy ();

	// Hier kannst du eine Antwort zurücksenden, falls erforderlich
	echo "Bild wurde über " . $_POST ['direction'] . " gedreht!";
}
?>
