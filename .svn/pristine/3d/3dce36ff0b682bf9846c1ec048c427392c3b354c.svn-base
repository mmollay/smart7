<?php
ini_set ( 'display_errors', 1 );
ini_set ( 'display_startup_errors', 1 );
error_reporting ( E_ERROR | E_PARSE );
error_reporting ( 1 );

include ('php_image_magician.php');

if ($_SERVER ['REQUEST_METHOD'] === 'POST') {
	$filename = $_SERVER ['DOCUMENT_ROOT'] . "/smart7/smartform/" . $_POST ['url'];
	
	// Überprüfe, ob der 'direction'-Parameter gesetzt ist, und weise ihn einer Variablen zu
	$direction = isset ( $_POST ['direction'] ) ? $_POST ['direction'] : 'right'; // Standardwert 'right', falls nicht gesetzt
	
	$imageLibObj = new imageLib ( $filename );
	$imageLibObj->rotate ( $direction, $color = 'transparent' );
	$imageLibObj->saveImage ( $filename );
	
	// Hier kannst du eine Antwort zurücksenden, falls erforderlich
	echo "Bild wurde über ". $_POST ['direction'] . " gedreht!";
}
