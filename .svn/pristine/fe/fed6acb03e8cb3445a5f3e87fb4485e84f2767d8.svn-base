<?php
// Investment form configuration
$arr['ajax'] = array('success' => "after_form_investment(data)", 'dataType' => "html");


// sql query for investment Left Join clients and profit_shares
$arr['sql'] = array(
    'query' => "SELECT * FROM ssi_trader.deposits
                LEFT JOIN ssi_trader.clients ON deposits.client_id = clients.client_id
                LEFT JOIN ssi_trader.profit_shares ON deposits.client_id = profit_shares.client_id
                WHERE deposits.deposit_id = '{$_POST['update_id']}'"
);


// Field: Title
$arr['field']['title'] = array(
    'type' => 'input',
    'label' => 'Title',
    'focus' => true,
    'info' => 'Enter the title of the investment. This could be the project name or investment opportunity.',
    'value' => 'Investment',
    'validate' => true
);

// Field: User selection
$arr['field']['client_id'] = array(
    'type' => 'dropdown',
    'label' => 'User',
    'array_mysql' => 'SELECT client_id, CONCAT(first_name, " ", last_name) AS name FROM ssi_trader.clients ORDER BY name ASC',
    'text' => 'name',
    'class' => 'fluid search selection',
    'info' => 'Select the user who is making the investment. This list is populated from registered clients.',
    'validate' => true
);

// Field: Deposit Amount
$arr['field']['deposit_amount'] = array(
    'type' => 'input',
    'label' => 'Deposit Amount',
    'class' => 'fluid',
    'placeholder' => '50000.00',
    'value' => '50000',
    'info' => 'Specify the amount of the deposit for this investment. Format: Numeric value, e.g., 50000 for fifty thousand.'
);

// Field: Deposit Date
$arr['field']['deposit_date'] = array(
    'type' => 'date',
    'label' => 'Deposit Date',
    'class' => 'fluid',
    'info' => 'Select the date when the deposit was made.',
    'value' => date('Y-m-d'),
    'validate' => true
);

// Field: Description
// $arr['field']['description'] = array(
//     'type' => 'textarea',
//     'label' => 'Description',
//     'class' => 'fluid',
//     'info' => 'Provide a brief description of the investment. This could include its purpose, expected returns, or any relevant details.'
// );

$arr['field'][] = array('type' => 'div', 'class' => 'fields equal width');
// Field: Profit Share Percentage
$arr['field']['profit_share_percentage'] = array(
    'type' => 'input',
    'label' => 'Profit Share Percentage',
    'label_right' => '%',
    'class' => 'fluid',
    'info' => 'Enter the percentage of profit sharing for this investment. Format: Decimal, e.g., 10 for ten percent.',
    'value' => '10.00'
);

// Field: Start Date and End Date for the Profit Sharing Period

$arr['field']['start_date'] = array(
    'type' => 'date',
    'label' => 'Start Date',
    'class' => 'fluid',
    'info' => 'Specify the start date of the period for which profit sharing is calculated.',
    'validate' => true,
    'value' => date('Y-m-d')
);
$arr['field']['end_date'] = array(
    'type' => 'date',
    'label' => 'End Date',
    'class' => 'fluid',
    'info' => 'Specify the end date of the period for which profit sharing is calculated.',
    'validate' => true,
    'value' => date('Y-m-d', strtotime('+1 year'))
);
$arr['field'][] = array('type' => 'div_close');

// Field: Comment
$arr['field']['comment'] = array(
    'type' => 'textarea',
    'label' => 'Comment',
    'class' => 'fluid',
    'rows' => 1,
    'info' => 'Add any comments or additional notes related to this investment.'
);

$add_js .= "<script type=\"text/javascript\" src=\"js/form_after.js\"></script>"; // Ensure the file name is correct
