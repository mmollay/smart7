<?php
$url = "https://www.finanzen.at/index/realtimekurs/dax?nocache=" . time();

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, false);
$response = curl_exec($ch);

if (curl_errno($ch)) {
    echo 'Fehler beim Abrufen des DAX-Wertes';
} else {
    curl_close($ch);
    $dom = new DOMDocument();
    @$dom->loadHTML($response);
    $xpath = new DOMXPath($dom);
    // XPath, um das Element basierend auf der Klasse 'push-data' zu finden
    $query = "//span[contains(@class, 'push-data')]";
    $daxValueElements = $xpath->query($query);

    if ($daxValueElements->length > 0) {
        $daxValue = trim($daxValueElements->item(0)->nodeValue);
        // Bereinigt den Wert, um HTML-Entit√§ten zu ersetzen
        $daxValue = str_replace('&nbsp;', '', $daxValue);
        echo $daxValue; // Gibt den DAX-Wert aus
    } else {
        echo "DAX-Wert konnte nicht gefunden werden.";
    }
}
